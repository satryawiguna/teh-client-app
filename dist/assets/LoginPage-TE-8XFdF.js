import{j as e,R as k,u as v,a as y,b as L,r as b,c as C,L as _,d as I,e as g,l as E,s as $}from"./index-FqGtBFJ_.js";import{c as M,a as f,S,u as A}from"./index.esm-tyU5CQBU.js";import{u as R}from"./useDispatch-MackedKD.js";const j=({t:a,id:m,value:i,htmlFor:t,className:o})=>e.jsx("label",{id:m,...t&&{htmlFor:t},...o&&{className:o},children:a(i)}),T=({t:a,id:m,name:i,type:t="text",className:o,placeholder:l,value:c,checked:u,disable:x=!1,readonly:h=!1,onChange:d,onBlur:r})=>e.jsx(e.Fragment,{children:e.jsx("input",{id:m,name:i,type:t,...o&&{className:o},...l&&{placeholder:a(`${l}`)},...x&&{disabled:!0},...h&&{readOnly:!0},...d&&{onChange:d},...r&&{onBlur:r},...t!=="checkbox"&&c?{value:c||""}:{value:""},...t==="checkbox"&&u&&{checked:u},autoComplete:"off"})}),F=({message:a})=>e.jsx("p",{className:"error-text",children:e.jsx("span",{children:a})}),p=({t:a,id:m,name:i,type:t,placeholder:o,value:l,shadow:c,checked:u,onChange:x,onBlur:h,touched:d,errors:r,label:s=""})=>e.jsxs("div",{className:"input",children:[s&&e.jsx(j,{t:a,id:s,value:a(s),htmlFor:i,className:"label"}),e.jsx(T,{t:a,id:m,name:i,...t&&{type:t},className:c?`input-shadow ${d&&r&&"error"}`:`input-default ${d&&r&&"error"}`,...o&&{placeholder:o},...t!=="checkbox"&&l&&{value:l||""},...t==="checkbox"&&u&&{checked:u},...x&&{onChange:x},...h&&{onBlur:h}}),d&&r&&e.jsx(F,{message:a(r)})]}),B=M().shape({email:f().email().required("error.email_required"),password:f().min(8,"error.password_must_has_minimum_8_characters")}),O=({t:a,type:m="danger",className:i,icon:t,title:o,message:l,dismiss:c})=>{const u=(s="danger")=>{let n;const N="icon",w="dismiss";switch(s){case"info-accent":n="alt-info bordered-accent";break;case"success-accent":n="alt-success bordered-accent";break;case"warning-accent":n="alt-warning bordered-accent";break;case"danger-accent":n="alt-danger bordered-accent";break;case"info-border":n="alt-info bordered-alert";break;case"success-border":n="alt-success bordered-alert";break;case"warning-border":n="alt-warning bordered-alert";break;case"danger-border":n="alt-danger bordered-alert";break;case"info":n="alt-info default";break;case"success":n="alt-success default";break;case"warning":n="alt-warning default";break;case"danger":default:n="alt-danger default";break}return{alertClassName:n,iconClassName:N,dismissClassName:w}},{alertClassName:x,iconClassName:h,dismissClassName:d}=u(m),r=k.cloneElement(t,{className:h});return e.jsxs("div",{id:"alert-message",className:`${x} ${i}`,role:"alert",children:[t&&r,e.jsx("span",{className:"sr-only",children:"Info"}),e.jsxs("div",{className:"ms-3 text-sm font-medium",children:[o&&e.jsx("h3",{className:"font-bold",children:a(`${o}`)}),l&&e.jsxs("div",{className:"flex flex-col",children:[l.hasOwnProperty("errors")&&Array.isArray(l.errors)?l.errors.forEach((s,n)=>e.jsx("span",{children:`${a(s)}`},n)):typeof l.errors=="object"&&Object.keys(l.errors).forEach((s,n)=>e.jsx("span",{children:`${a(l.errors[s])}`},n)),l.hasOwnProperty("error")&&typeof l.error=="string"&&e.jsx("span",{children:a(l.error)})]})]}),c&&e.jsxs("button",{type:"button",className:d,"data-dismiss-target":"#message-alert","aria-label":"Close",children:[e.jsx("span",{className:"sr-only",children:"Dismiss"}),e.jsx("svg",{"aria-hidden":"true",className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]})},V=({t:a,id:m,name:i,type:t="button",value:o,onClick:l,className:c,icon:u,iconPosition:x="left",isLoading:h,disable:d})=>e.jsxs("button",{id:m,name:i,...t&&{type:t},...l&&{onClick:l},...c&&{className:c},...d&&{disable:d},children:[h&&e.jsx(S,{size:"sm"}),x==="left"&&u,a(o),x==="right"&&u]}),G=({t:a})=>{const m=v(),i=R(),{rememberMe:t}=y(L),[,o]=b.useState(t),[l,c]=b.useState(!1),u={email:"",password:"",rememberMe:[],otp:null},x=()=>{i(I({rememberMe:!t})),r.setFieldValue("rememberMe",!t)},{mutate:h,error:d}=C(s=>{i(g({isLoading:!1})),i(E({userInfo:{userId:s.result.userId,secondaryId:s.result.secondaryId,fullName:s.result.fullName,email:s.result.email,profileImageUrl:s.result.profileImageUrl,roles:s.result.roles,policies:s.result.policies,authenticatorEnabled:s.result.authenticatorEnabled},accessToken:s.result.tokens.accessToken,refreshToken:s.result.tokens.refreshToken})),$(s.result.tokens.accessToken),setTimeout(()=>{m("/admin/dashboard",{replace:!0})},1e3)},s=>{i(g({isLoading:!1})),s.status===422?(c(!1),m("/otp",{state:{email:r.values.email,password:r.values.password}})):c(!0)}),r=A({initialValues:u,validationSchema:B,onSubmit:async s=>{i(g({isLoading:!0})),c(!1),h(s)}});return b.useEffect(()=>{o(t)},[t]),e.jsx("section",{className:"bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 mx-auto h-screen lg:py-0",children:[e.jsxs("h1",{className:"mb-12 text-4xl font-extrabold leading-none tracking-tight text-gray-900 md:text-5xl lg:text-6xl dark:text-white",children:["TehGroup",e.jsx("span",{className:"text-blue-600 dark:text-blue-500",children:"Client"})]}),l&&e.jsx(O,{t:a,className:"sm:max-w-md",message:d}),e.jsx("div",{className:"w-full bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700",children:e.jsxs("div",{className:"p-6 space-y-4 md:space-y-6 sm:p-8",children:[e.jsx("h1",{className:"text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white",children:a("text.signin_to_your_account")}),e.jsxs("form",{onSubmit:r.handleSubmit,className:"space-y-4 md:space-y-6",children:[e.jsx(p,{t:a,id:"email",name:"email",placeholder:"label.email",label:"label.email",onChange:r.handleChange,onBlur:r.handleBlur,value:r.values.email,touched:r.touched.email,errors:r.errors.email}),e.jsx(p,{t:a,id:"password",name:"password",type:"password",placeholder:"label.password",label:"label.password",onChange:r.handleChange,onBlur:r.handleBlur,value:r.values.password,touched:r.touched.password,errors:r.errors.password}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex items-center h-5",children:e.jsx(p,{t:a,id:"remember_me",name:"remember_me",type:"checkbox",onChange:x,value:""})}),e.jsx("div",{className:"ml-3 text-sm",children:e.jsx(j,{t:a,id:"remember_me",className:"text-gray-500 dark:text-gray-300",value:"label.remember_me"})})]}),e.jsx(_,{to:"/forgot-password",className:"text-sm font-medium text-primary-600 hover:underline dark:text-gray-300",children:a("label.forgot_password")})]}),e.jsx(V,{t:a,id:"sign_in",name:"sign_in",type:"submit",className:"btn-default default",value:"label.sign_in"})]})]})})]})})};export{G as default};
